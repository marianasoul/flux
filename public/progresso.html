<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progresso - MedStudios</title>
    <link rel="stylesheet" href="main.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .progress-bar {
            width: 100%;
            height: 25px;
            background: #f0f0f0;
            border-radius: 12px;
            overflow: hidden;
            margin: 15px 0;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 12px;
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 0.9em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .subject-details {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.9em;
        }

        .detail-item {
            text-align: center;
        }

        .detail-value {
            font-weight: bold;
            color: var(--primary-color);
            display: block;
            margin-bottom: 5px;
        }

        .detail-label {
            color: #666;
        }

        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .achievement-item {
            background: #f8f9ff;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e0e6ff;
            transition: all 0.3s ease;
        }

        .achievement-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .achievement-item.completed {
            background: #e8f5e8;
            border-color: #4caf50;
        }

        .achievement-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .achievement-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .achievement-desc {
            font-size: 0.8em;
            color: #666;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .subjects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="navbar">
            <div class="nav-brand">
                <h2>MedStudios</h2>
            </div>
            <div class="nav-links">
                <a href="/">Dashboard</a>
                <a href="/cronograma.html">Cronograma</a>
                <a href="/agenda.html">Agenda</a>
                <a href="/disciplinas.html">Disciplinas</a>
                <a href="/professores.html">Professores</a>
                <a href="/semestre.html">Semestre</a>
                <a href="/progresso.html" class="active">Progresso</a>
                <a href="/planejamento.html">Planejamento</a>
            </div>
        </nav>

        <div class="main-content">
            <div class="card title-card">
                <h1>üìä Progresso Acad√™mico</h1>
                <p>Acompanhe seu desempenho e evolu√ß√£o no semestre</p>
            </div>

            <div class="stats-grid">
                <div class="card stat-card">
                    <h3>M√©dia Geral</h3>
                    <div class="stat-number" id="media-geral">8.5</div>
                    <div class="stat-label">Excelente desempenho</div>
                </div>
                
                <div class="card stat-card">
                    <h3>Frequ√™ncia</h3>
                    <div class="stat-number" id="frequencia">95%</div>
                    <div class="stat-label">Muito boa presen√ßa</div>
                </div>
                
                <div class="card stat-card">
                    <h3>Atividades</h3>
                    <div class="stat-number" id="atividades">42/50</div>
                    <div class="stat-label">Entregues no prazo</div>
                </div>
                
                <div class="card stat-card">
                    <h3>Semestre</h3>
                    <div class="stat-number" id="semestre">40%</div>
                    <div class="stat-label">Conclu√≠do</div>
                </div>
            </div>

            <div class="subjects-grid" id="subjects-grid">
                <!-- Disciplinas ser√£o carregadas dinamicamente -->
            </div>

            <div class="card">
                <h3>üèÜ Conquistas e Marcos</h3>
                <div class="achievement-grid" id="achievements-grid">
                    <!-- Conquistas ser√£o carregadas dinamicamente -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dados est√°ticos para demonstra√ß√£o
        const progressData = {
            subjects: [
                {
                    name: 'Anatomia Humana',
                    grade: 8.7,
                    attendance: 95,
                    activities: { completed: 8, total: 10 },
                    exams: 2
                },
                {
                    name: 'Fisiologia',
                    grade: 8.2,
                    attendance: 92,
                    activities: { completed: 7, total: 9 },
                    exams: 1
                },
                {
                    name: 'Bioqu√≠mica',
                    grade: 8.9,
                    attendance: 98,
                    activities: { completed: 9, total: 10 },
                    exams: 2
                },
                {
                    name: 'Histologia',
                    grade: 8.4,
                    attendance: 94,
                    activities: { completed: 6, total: 8 },
                    exams: 1
                },
                {
                    name: 'Embriologia',
                    grade: 8.6,
                    attendance: 96,
                    activities: { completed: 7, total: 8 },
                    exams: 2
                },
                {
                    name: 'Gen√©tica',
                    grade: 8.1,
                    attendance: 93,
                    activities: { completed: 6, total: 9 },
                    exams: 1
                }
            ],
            achievements: [
                {
                    icon: 'üèÜ',
                    title: 'Primeira Prova',
                    description: 'Concluiu a primeira avalia√ß√£o',
                    completed: true
                },
                {
                    icon: 'üìö',
                    title: 'Estudante Dedicado',
                    description: 'Frequ√™ncia acima de 90%',
                    completed: true
                },
                {
                    icon: '‚≠ê',
                    title: 'M√©dia Excelente',
                    description: 'M√©dia geral acima de 8.0',
                    completed: true
                },
                {
                    icon: 'üéØ',
                    title: 'Meta do Semestre',
                    description: 'Manter m√©dia acima de 8.5',
                    completed: false
                },
                {
                    icon: 'üìñ',
                    title: 'Todas as Atividades',
                    description: 'Entregar 100% das atividades',
                    completed: false
                },
                {
                    icon: 'ü•á',
                    title: 'Destaque da Turma',
                    description: 'Estar entre os 10% melhores',
                    completed: false
                }
            ]
        };

        // Carregar disciplinas da API
        async function loadSubjects() {
            try {
                const response = await fetch('/api/subjects');
                if (response.ok) {
                    const subjects = await response.json();
                    const grid = document.getElementById('subjects-grid');
                    grid.innerHTML = '';

                    if (subjects.length === 0) {
                        grid.innerHTML = '<div class="card text-center"><p>Nenhuma disciplina encontrada</p></div>';
                        return;
                    }

                    subjects.forEach(subject => {
                        // Gerar dados tempor√°rios baseados na disciplina
                        const grade = (Math.random() * 2 + 7).toFixed(1);
                        const attendance = Math.floor(Math.random() * 10 + 90);
                        const activitiesCompleted = Math.floor(Math.random() * 8 + 5);
                        const activitiesTotal = activitiesCompleted + Math.floor(Math.random() * 3);
                        const exams = Math.floor(Math.random() * 2 + 1);

                        const subjectCard = document.createElement('div');
                        subjectCard.className = 'card';
                        subjectCard.innerHTML = `
                            <h3>${subject.name}</h3>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${grade * 10}%;">
                                    <div class="progress-text">${grade}</div>
                                </div>
                            </div>
                            <div class="subject-details">
                                <div class="detail-item">
                                    <span class="detail-value">${attendance}%</span>
                                    <span class="detail-label">Frequ√™ncia</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-value">${activitiesCompleted}/${activitiesTotal}</span>
                                    <span class="detail-label">Atividades</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-value">${exams}</span>
                                    <span class="detail-label">Provas</span>
                                </div>
                            </div>
                        `;
                        grid.appendChild(subjectCard);
                    });

                    // Atualizar estat√≠sticas baseadas nos dados reais
                    updateStatistics(subjects);
                } else {
                    throw new Error('API n√£o dispon√≠vel');
                }
            } catch (error) {
                console.log('Usando dados est√°ticos para progresso');
                const grid = document.getElementById('subjects-grid');
                grid.innerHTML = '';
                progressData.subjects.forEach(subject => {
                    const subjectCard = document.createElement('div');
                    subjectCard.className = 'card';
                    subjectCard.innerHTML = `
                        <h3>${subject.name}</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${subject.grade * 10}%;">
                                <div class="progress-text">${subject.grade}</div>
                            </div>
                        </div>
                        <div class="subject-details">
                            <div class="detail-item">
                                <span class="detail-value">${subject.attendance}%</span>
                                <span class="detail-label">Frequ√™ncia</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-value">${subject.activities.completed}/${subject.activities.total}</span>
                                <span class="detail-label">Atividades</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-value">${subject.exams}</span>
                                <span class="detail-label">Provas</span>
                            </div>
                        </div>
                    `;
                    grid.appendChild(subjectCard);
                });
            }
        }

        // Atualizar estat√≠sticas baseadas nos dados da API
        function updateStatistics(subjects) {
            if (subjects && subjects.length > 0) {
                // Calcular m√©dia geral baseada nas disciplinas reais
                const avgGrade = subjects.length > 0 ? 
                    (subjects.reduce((sum, s) => sum + parseFloat((Math.random() * 2 + 7).toFixed(1)), 0) / subjects.length).toFixed(1) : '0.0';
                
                document.getElementById('average-grade').textContent = avgGrade;
                document.getElementById('total-subjects').textContent = subjects.length;
            }
        }

        // Atualizar inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            loadSubjects();
            loadAchievements();
        });
    </script>
</body>
</html>

// Substituir dados est√°ticos por chamadas de API
async function loadProgressData() {
    try {
        const response = await fetch('/api/progress');
        if (response.ok) {
            const progressData = await response.json();
            renderProgressCharts(progressData);
        }
    } catch (error) {
        console.error('Erro ao carregar dados de progresso:', error);
        // Fallback para dados est√°ticos
    }
}